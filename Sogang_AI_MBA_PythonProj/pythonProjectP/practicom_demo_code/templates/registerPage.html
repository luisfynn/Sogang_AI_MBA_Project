<!DOCTYPE html>
<html>
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles.css') }}">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <title>Register</title>
</head>
<body>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <!-- 배너 영역 -->
    <div class="container-fluid bg-custom py-3">
        <div class="container">
            <div class="row">
                <div class="col-12 text-center position-relative">
                    <h1 class="hawkai-text"> Hawk AI </h1><br>
                    <img src="{{ url_for('static', filename='istockphoto-1282555139-1024x1024.jpg') }}" alt="Title Image" class="title-image">
                </div>
            </div>
        </div>
    </div>

<!-- 네비게이션 바 -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container justify-content-end">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href="{{ url_for('logout') }}">Login</a>
            </li>
        </ul>
    </div>
</nav>

    <br><h2 class="text-center">Register</h2><br>
    <div class="container form-container">
        <form action="{{ url_for('register') }}" method="post">
            <table class="form-table">
                <tr>
                    <td class="label-cell"><label for="username">Username:</label></td>
                    <td class="input-cell"><input type="text" id="username" name="username" class="form-control"></td>
                </tr>
                <tr>
                    <td class="label-cell"><label for="password">Password:</label></td>
                    <td class="input-cell"><input type="password" id="password" name="password" class="form-control"></td>
                </tr>
                <tr>
                    <td class="label-cell"><span>나이대:</span></td>
                    <td class="input-cell">
                        <div class="button-group">
                            <button type="button" class="button-age btn btn-outline-secondary" value="10s">10대</button>
                            <button type="button" class="button-age btn btn-outline-secondary" value="20s">20대</button>
                            <button type="button" class="button-age btn btn-outline-secondary" value="30s">30대</button>
                            <button type="button" class="button-age btn btn-outline-secondary" value="40s">40대</button>
                            <button type="button" class="button-age btn btn-outline-secondary" value="50s">50대</button>
                            <button type="button" class="button-age btn btn-outline-secondary" value="60s">60대 이상</button>
                        </div>
                        <input type="hidden" name="age" id="age" value="">
                    </td>
                </tr>
                <tr>
                    <td class="label-cell"><span>성별:</span></td>
                    <td class="input-cell">
                        <div class="button-group">
                            <button type="button" class="button-gender btn btn-outline-secondary" value="male">남성</button>
                            <button type="button" class="button-gender btn btn-outline-secondary" value="female">여성</button>
                        </div>
                        <input type="hidden" name="gender" id="gender" value="">
                    </td>
                </tr>
                <tr>
                    <td class="label-cell"><span>관심사:</span></td>
                    <td class="input-cell">
                        <div class="button-group">
                            <button type="button" class="button-interest btn btn-outline-secondary" value="wakeup">새벽기상</button>
                            <button type="button" class="button-interest btn btn-outline-secondary" value="meal">식단관리</button>
                            <button type="button" class="button-interest btn btn-outline-secondary" value="diary">하루기록</button>
                            <button type="button" class="button-interest btn btn-outline-secondary" value="sports">운동</button>
                            <button type="button" class="button-interest btn btn-outline-secondary" value="other">기타</button>
                        </div>
                        <input type="hidden" name="interest" id="interest" value="">
                    </td>
                </tr>
                <tr id="otherInterestRow" style="display: none;">
                    <td class="label-cell"><label for="other_interest">기타 관심사:</label></td>
                    <td class="input-cell"><input type="text" name="other_interest" id="other_interest" class="form-control" placeholder="기타 관심사를 입력하세요"></td>
                </tr>
                <tr>
                    <td colspan="2" class="text-center">
                        <input type="submit" value="Sign in" class="btn btn-custom">
                    </td>
                </tr>
            </table>
        </form>
    </div>
    <script>
        // 버튼 선택 기능 구현
        const buttonAges = document.querySelectorAll('.button-age');
        const buttonGenders = document.querySelectorAll('.button-gender');
        const buttonInterests = document.querySelectorAll('.button-interest');
        const otherInterestRow = document.getElementById('otherInterestRow');
        const otherInterestInput = document.getElementById('other_interest');

        function handleButtonSelection(buttons, inputField, multiple = false) {
            buttons.forEach(button => {
                button.addEventListener('click', () => {
                    if (!multiple) {
                        buttons.forEach(btn => btn.classList.remove('button-selected'));
                    }
                    button.classList.toggle('button-selected');
                    let selectedValues = Array.from(buttons)
                                             .filter(btn => btn.classList.contains('button-selected'))
                                             .map(btn => btn.value);
                    inputField.value = selectedValues.join(',');

                    if (button.value === 'other') {
                        if (button.classList.contains('button-selected')) {
                            otherInterestRow.style.display = 'table-row';
                        } else {
                            otherInterestRow.style.display = 'none';
                            otherInterestInput.value = '';
                        }
                    }
                });
            });
        }

        handleButtonSelection(buttonAges, document.getElementById('age'));
        handleButtonSelection(buttonGenders, document.getElementById('gender'));
        handleButtonSelection(buttonInterests, document.getElementById('interest'), true);
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>
        $(document).ready(function() {
            const flashMessage = "{{ get_flashed_messages()[0] }}" || "";
            if (flashMessage) {
                $("#flashMessageBody").text(flashMessage);
                $("#flashMessageModal").modal("show");
            }
        });
    </script>

</body>
</html>
